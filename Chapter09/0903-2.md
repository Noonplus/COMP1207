## ตัวอย่างการพัฒนาโปรแกรมพื้นฐานทางธุรกิจ (ต่อ)
### การคำนวณจำนวนธนบัตร
การคำนวณจำนวนธนบัตรสามารถนำไปประยุกต์ใช้ได้หลายงานในทางธุรกิจ อาทิ ระบบรับชำระเงิน ระบบแลกเปลี่ยนเงิน และระบบถอนเงิน ซึ่งการวิเคราะห์องค์ประกอบของโปรแกรม แสดงดังตาราง

| ส่วนนำเข้า | กระบวนการ | ผลลัพธ์ |
| --- | --- | --- |
| จำนวนเงินที่ต้องการถอน (withdraw) | ระบุยอดเงินที่ต้องการถอน ถอนได้ระหว่าง 100-20,000 บาท และ หารด้วย 100 ลงตัว โดยสามารถถอนได้มากกว่า 1 ครั้ง | - จำนวนธนบัตรขนาด 1,000 บาท (num1000) |
|  |  | - จำนวนธนบัตรขนาด 500 บาท (num500) |
|  |  | - จำนวนธนบัตรขนาด 100 บาท (num100) |

จากตาราง แสดงการวิเคราะห์การทำงานของโปรแกรมถอนเงินจากตู้เอทีเอ็มของธนาคาร โดยทั่วไปตู้เอทีเอ็มของธนาคารไทยจะบรรจุธนบัตรจำนวน 3 ขนาด ได้แก่ 1,000 บาท, 500 บาท และ 100 บาท ซึ่งโปรแกรมมีส่วนนำเข้าได้แก่ จำนวนเงินที่ผู้ใช้ต้องการถอน (withdraw) ในส่วนกระบวนการจะนำข้อมูลที่รับเข้าไปคำนวณจำนวนธนบัตรแต่ละขนาด โดยจะให้ความสำคัญกับธนบัตรที่มีขนาดใหญ่ที่สุดก่อน สุดท้ายจะได้ผลลัพธ์เป็นจำนวนธนบัตรแต่ละขนาด ได้แก่ ขนาด 1,000 บาท (num1000), 500 บาท (num500) และ 100 บาท (num100) ตามลำดับ จากการวิเคราะห์การทำงานของโปรแกรมสามารถนำมาเขียนเป็นผังโปรแกรมการคำนวณจำนวนธนบัตร ดังภาพ

<img src=img/0902.png>

จากภาพ แสดงผังงานโปรแกรมคำนวณจำนวนธนบัตรอย่างง่าย โดยสามารถเขียนอธิบายขั้นตอนวิธีการทำงาน ดังนี้
1. ประกาศตัวแปรหรือกำหนดค่าเริ่มต้นให้กับตัวแปร ได้แก่ ยอดที่ผู้ใช้จะถอน (withdraw = 0) ตัวแปรตรวจสอบการทำรายการใหม่ (check) และ กำหนดตัวแปรผลลัพธ์ ได้แก่ จำนวนธนบัตรขนาด 1,000 บาท (num1000 = 0)  จำนวนธนบัตรขนาด 500 บาท (numn500 = 0) และ จำนวนธนบัตรขนาด 100 บาท (num100 = 0)
2. รับเข้ายอดเงินที่ต้องการถอน (รับค่า withdraw)
3. ตรวจสอบยอดถอนต้องอยู่ในช่วง 100 ถึง 20,000 และ หารด้วย 100 ลงตัว

  3.1  ถ้าจริง
  
(1)  เรียกใช้ฟังก์ชันคำนวณจำนวนธนบัตรระบุขนาด 1,000

(2)  เรียกใช้ฟังก์ชันคำนวณจำนวนธนบัตรระบุขนาด 500

(3)  เรียกใช้ฟังก์ชันคำนวณจำนวนธนบัตรระบุขนาด 100

(4)  แสดงจำนวนธนบัตรในแต่ละขนาด  

  3.2  ถ้าไม่จริง แจ้งข้อผิดพลาดระบุว่ายอดถอนไม่ถูกต้อง
  
4. รับเข้าข้อมูล (check) เพื่อยืนยันการทำรายการใหม่
5. ตรวจสอบค่าการยันยันการทำรายการใหม่

  5.1  ถ้าจริง (check เท่ากับ ‘y’) ให้กลับไปทำซ้ำ ข้อ 1
  
  5.2  ถ้าไม่ใช่ (check ไม่เท่ากับ ‘y’) ให้จบการทำงาน
  
จากขั้นตอนวิธีข้างต้น สามารถนำไปเขียนโปรแกรมด้วยภาษาซีพลัสพลัสได้ ดังนี้

```
#include <windows.h>
#include <stdio.h>
#include <conio.h>
int getNumATM(int w, int s);
main() {
    int withdraw, num1000, num500, num100;
    char check;
    withdraw = num1000 = num500 = num100 = 0;
    do {
        system("cls");
        printf("Input Money:"); scanf("%d", &withdraw);
        if((withdraw >= 100 && withdraw <= 20000) && (withdraw%100==0)) {
            num1000 = getNumATM(withdraw, 1000);
            num500 = getNumATM((withdraw%1000), 500);
            num100 = getNumATM((withdraw%500), 100);
            printf("1000B = %d, 500B = %d 100B = %d\n", 
                    num1000, num500, num100);
        }else {
            printf("can't withdraw %dB\n", withdraw);
        }
        printf("Do you want withdraw? y/n:"); check=getche();
    } while (check == 'y');
}
int getNumATM(int w, int s){
    return w/s;
}
```
[ดาวน์โหลด source code](src/ch09_02.cpp)

จากตัวอย่างโปรแกรม ได้ทดสอบโปรแกรมโดยรับค่าเงินที่ต้องการถอนจำนวน 5900 บาท ทำให้ได้ผลลัพธ์ปรากฏบนจอภาพ ดังนี้

```
Input Money:5900
1000B = 5, 500B = 1 100B = 4
Do you want withdraw? y/n:

```

---
#### [<< หน้าก่อนหน้า](0903-1.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0903-3.md)
---
