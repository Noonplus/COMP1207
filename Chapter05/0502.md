## ฟังก์ชันแสดงผลและรับค่าตามรูปแบบ

ส่วนนี้จะอธิบายเกี่ยวกับฟังก์ชันแสดงผลและรับค่าตามรูปแบบที่กำหนด ได้แก่ ฟังก์ชันแสดงผลตามรูปแบบ printf() และ ฟังชันรับค่าตามรูปแบบ scanf()

### ฟังก์ชัน printf()
ฟังก์ชัน printf() เป็นฟังก์ชันที่ใช้ในการแสดงผลลัพธ์ตามรูปแบบที่กำหนด ไปยังอุปกรณ์แสดงผล ตัวอย่าง เช่น การส่งข้อความไปแสดงผลบนจอภาพ จะมีรูปแบบคำสั่ง ดังนี้

```
printf("ข้อความที่ต้องการแสดง");
```

สามารถใช้คำสั่ง printf() สั่งข้อความไปแสดงผลบนจอภาพ ตัวอย่างเช่น

```
01:printf("Good morning");	// แสดงข้อความ: Good morning
```

จากตัวอย่าง เมื่อโปรแกรมประมวลผลจะส่งข้อความ “Good morning” ไปแสดงผลลัพธ์บนจอภาพ ดังนี้

```
01:Good morning
```

นอกจากนี้ การพิมพ์ข้อความที่ประกอบด้วยอักขระบางตัว ไม่สามารถใช้งานโดยตรงได้ อาทิ เครื่องหมายคำพูด เนื่องจากสัญลักษณ์เหล่านั้นเป็นส่วนประกอบของโครงสร้างคำสั่งภาษาซี รวมไปถึงกลุ่มอักขระแบบไวท์สเปสที่ไม่มีรูปตัวอักษรให้พิมพ์ได้ อาทิ การขึ้นบรรทัดใหม่ ดังนั้น วิธีเขียนจึงต้องใช้รหัสบังคับอักขระแทนการพิมพ์ข้อความ ตามตาราง

<img src=img/0500-1.png>

รายละเอียดของรหัสบังคับการพิมพ์อักขระและอักขระไวท์สเปสที่ไม่มีรูปตัวอักษรตามที่ได้อธิบายไว้ก่อนหน้า ซึ่งตัวอย่างการใช้งานรหัสบังคับพิมพ์อักขระ ดังนี้

```
01:printf("\"How are you \?\"\n");
```

จากตัวอย่าง เมื่อโปรแกรมประมวลผลข้อความ  “\"How are you \?\"\n” ซึ่งข้อความมีส่วนประกอบของรหัสบังคับพิมพ์อักขระ ไปแสดงผลบนจอภาพได้ ดังนี้

```
01:"How are you ?"
02:	
```

ความสามารถที่สำคัญของฟังก์ชัน printf() คือ การควบคุมการแสดงผลลัพธ์ตามรูปแบบที่กำหนดร่วมกับรายการอาร์กิวเมนท์แบบต่าง ๆ โดยมีรูปแบบคำสั่ง ดังนี้

```
printf("รูปแบบบังคับการพิมพ์", รายการอาร์กิวเมนท์);
```

การใช้ฟังก์ชัน printf() ควบคุมการแสดงผลตามรูปแบบร่วมกับรายการอาร์กิวเมนท์ที่กำหนด แสดงดังตัวอย่าง

```
01:printf("%d is a smaller than %d", 5, 10);	// พิมพ์ผลลัพธ์: 5 is a smaller than 10
```

ได้ผลลัพธ์ ดังนี้ 

```
01:5 is a smaller than 10
```

สำหรับกรณีที่ต้องการใช้รายการอาร์กิวเม้นท์ในรูปของตัวแปร ตัวอย่างเช่น

```
01:int x = 5, y = 10;	
02:printf("%d is a greater than %d", y, x);	// พิมพ์ผลลัพธ์: 10 is a greater than 5
```

ค่าของตัวแปรจะถูกนำมาแสดง ณ ตำแหน่ง รหัสบังคับการพิมพ์ %d ซึ่งได้ผลลัพธ์  คือ

```
01:10 is a greater than 5
```

ข้อควรระวังของการใช้รูปแบบบังคับการพิมพ์ค่าอาร์กิวเมนท์ ต้องบังคับการพิมพ์ค่าให้ถูกต้องตามชนิดของอาร์กิวเมนท์นั้น ๆ แสดงตามตัวอย่าง

```
01:#include <stdio.h>	
02:main() {	
03:   int d = 10; 	// d คือ จำนวนเต็ม
04:   float f = 3.5; 	// f คือ จำนวนจริง
05:   char c = 'A'; 	// c คือ อักขระ 
06:   char s[] = "Hello";	// s คือ ข้อความ
07:   printf("%d\n", d);	// พิมพ์จำนวนเต็ม
08:   printf("%f\n", f);	// พิมพ์จำนวนจริง (ปกติ มีทศนิยม 6 ตำแหน่ง)
09:   printf("%.4f\n", f);	// พิมพ์จำนวนจริง (ทศนิยม 4 ตำแหน่ง)
10:   printf("%c\n", c);	// พิมพ์อักขระ
11:   printf("%s", s);	// พิมพ์ข้อความ
12:}	
```
[ดาวน์โหลด source code](src/ch05_01.cpp)

การเลือกใช้รหัสบังคับการพิมพ์ค่าให้ตรงกับชนิดตัวแปรที่ต้องการแสดงผล โดยจะปรากฏผลลัพธ์บนจอภาพ ดังนี้

<img src=img/u1.png>

รูปแบบการบังคับการพิมพ์ค่าอาร์กิวเมนท์ในคำสั่ง printf() จะใช้เครื่องหมาย % (เปอร์เซนต์) ตามด้วยรหัสอักขระ เช่น %d หมายถึง บังคับพิมพ์จำนวนเต็ม เป็นต้น ซึ่งการบังคับการพิมพ์มีวัตถุประสงค์เพื่อควบคุมผลลัพธ์ รายละเอียดการบังคับพิมพ์ชนิดอื่น ๆ แสดงดังตาราง

<img src=img/0500-2.png>

รายละเอียดของรหัสบังคับการพิมพ์ที่ใช้ในการกำหนดรูปแบบบังคับการพิมพ์ในคำสั่ง printf() โดยสามารถจำแนกตามชนิดข้อมูล และตามวัตถุประสงค์การใช้งาน ประกอบด้วย การพิมพ์จำนวนเต็ม ได้แก่ %d, %i และ %u การพิมพ์จำนวนจริง ได้แก่ %f, %e และ %g การพิมพ์เป็นค่าเลขฐานแปด ได้แก่ %o การพิมพ์ค่าเป็นเลจฐานสิบหก ได้แก่ %x การพิมพ์อักขระ ได้แก่ %c และการพิมพ์ข้อความ ได้แก่ %s นอกจากการใช้งานรหัสบังคับพิมพ์ควบคุมผลลัพธ์ตามตัวอย่างข้างต้นแล้ว การเขียนควบคุมโดยระบุความกว้างของการแสดงผลร่วมกับการใช้รหัสบังคับการพิมพ์  อีกทั้งสามารถควบคุมด้านที่เกิดช่องว่างหากความกว้างที่ระบุมีมากกว่าความกว้างข้อมูลที่ต้องการแสดง ดังตัวอย่างโปรแกรม

```
01:include <stdio.h>	
02:main() {	
03:   int score = 10; 	
04:   float mean = 3.75;	
05:   printf("%-10d\n", score);	// พิมพ์จำนวนเต็ม 10 ตำแหน่ง 
06:     // (เกิดช่องว่างด้านขวา)
07:   printf("%10d\n", score);	// พิมพ์จำนวนเต็ม 10 ตำแหน่ง 
08:     // (เกิดช่องว่างด้านซ้าย)
09:   printf("%-10.2f\n", mean);	// พิมพ์จำนวนจริง 10 ตำแหน่ง รวมจุดทศนิยม
10:     // ทศนิยม 2 ตำแหน่ง (เกิดช่องว่างด้านขวา)
11:   printf("%10.2f\n", mean);    	// พิมพ์จำนวนจริง 10 ตำแหน่ง รวมจุดทศนิยม
12:     // ทศนิยม 2 ตำแหน่ง (เกิดช่องว่างด้านซ้าย)
13:}	
```
[ดาวน์โหลด source code](src/ch05_02.cpp)

ซึ่งผลของการทำงานโปรแกรมจะปรากฏผลลัพธ์ ดังนี้

<img src=img/u2.png>

### ฟังก์ชัน scanf()
ฟังก์ชัน scanf() เป็นฟังก์ชันที่ใช้สำหรับรับค่าข้อมูลตามรูปแบบที่กำหนด โดยการรับค่าด้วยฟังก์ชัน scanf() จะต้องตามด้วยการกดปุ่ม enter เพื่อดำเนินการระบุค่าให้กับตัวแปรตามรูปแบบที่กำหนดต่อไป โดยฟังก์ชัน scanf() มีรูปแบบการใช้งาน ดังนี้

```
scanf("รูปแบบบังคับการรับ", รายการอาร์กิวเมนท์);
```

การใช้งานฟังก์ชัน scanf() สำหรับการรับค่าเบื้องต้น แสดงดังตัวอย่าง

```
01:scanf("%d", &x);	// รับค่าจำนวนเต็มระบุให้กับตัวแปร x
```

จากตัวอย่างเป็นคำสั่งให้รับค่าจำนวนเต็ม (%d) จากแป้นพิมพ์ แล้วนำค่าดังกล่าวระบุให้กับตัวแปร x โดยนำไปจัดเก็บไว้ ณ ตำแหน่งของตัวแปร x บนหน่วยความจำ (ตำแหน่งตัวแปรเก็บค่า เช่น &x คือ ตำแหน่งที่ x ได้รับพื้นที่จัดสรรในหน่วยความจำ)

<img src=img/0500-3.png>

รายละเอียดของรหัสรูปแบบการบังคับการรับค่า โดยสามารถจำแนกออกตามชนิดข้อมูลและตามวัตถุประสงค์การใช้ อาทิ การรับจำนวนเต็ม ได้แก่ %d การรับจำนวนจริง ได้แก่ %f และ %lf การรับอักขระ ได้แก่ %c และ การรับข้อความ ได้แก่ %s โปรแกรมการรับค่าจำนวนเต็มจากแป้นพิมพ์อย่างง่าย ดังตัวอย่างต่อไปนี้

```
01:#include <stdio.h>	
02:main() {     	
03:   int x; 	
04:   printf("Enter integer number:");	// แสดงข้อความ “Enter integer number: ”
05:   scanf("%d", &x);	// ให้รับค่าจำนวนเต็ม แล้ว enter
06:   printf("x = %d\n", x);	// แสดงค่าตัวแปรจำนวนเต็ม x ที่รับมา
07:}	
```
[ดาวน์โหลด source code](src/ch05_03.cpp)

จากโปรแกรม เมื่อผู้ใช้รับเลขจำนวนเต็ม 10 จากแป้นพิมพ์ตามด้วยการกดปุ่ม enter จะได้ผลลัพธ์ของโปรแกรม ดังนี้

```
01:Enter integer number:10
02:x = 10
03:
```

หากต้องการเขียนคำสั่ง scanf() ให้มีรูปแบบการรับหลายค่า ต้องแยกแยะจำนวนค่าที่รับเข้ามาเพื่อใช้ระบุค่าที่จะใช้กับตัวแปรต่าง ๆ ให้เหมาะสม ตัวอย่างเช่น

```
01:scanf("%d%c", &x, &c);	// รับค่าจำนวนเต็มตามด้วยตัวอักษร 1 ตัว (ติดกัน)
```

จากตัวอย่าง สมมุติว่า เมื่อมีการรับค่า 100A โปรแกรมจะทำการประมวลผลโดยจะแยกค่าออกเป็น 2 ค่า โดยจะระบุค่าให้กับตัวแปร x ด้วย 100 และตัวแปร c ด้วย ‘A’ หากต้องการเขียนคำสั่ง scanf() ให้มีการรับตัวเลข 2 ค่า ติดกัน เช่น “%d%d”  โปรแกรมจะไม่สามารถแยกค่าได้ จึงต้องกำหนดอักขระหรือสัญลักษณ์พิเศษเข้าไปในรูปแบบการรับค่าเพื่อคั่นกลางสำหรับใช้แบ่งข้อมูลดังกล่าว ตัวอย่างเช่น

```
01:scanf("%d %d", &x, &y);	// รับค่าจำนวนเต็ม 2 ตัว (ใช้ช่องว่างคั่นกลาง)
```
---
#### [<< หน้าก่อนหน้า](0501.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0503.md)
---
