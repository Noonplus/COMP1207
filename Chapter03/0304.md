## ฟังก์ชัน
ฟังก์ชัน (Function) เป็นส่วนย่อยของโปรแกรม หรือคำสั่งโปรแกรมย่อยที่สร้างขึ้นมา โดยมีวัตถุประสงค์เพื่อทำงานในด้านใดด้านหนึ่งซึ่งจะส่งผลให้เกิดการง่ายต่อการเรียกใช้งาน การแก้ไข หรือการปรับปรุงโปรแกรมเพิ่มเติม การใช้งานฟังก์ชันสามารถแบ่งออกเป็น 2 ประเภท ดังนี้ 
* ฟังก์ชันสำเร็จรูปเป็นฟังก์ชันมาตรฐานในภาษาซึ ซึ่งจะถูกรวบรวมอยู่ในไฟล์ไลบรารี โดยฟังก์ชันสำเร็จรูปจะเก็บรวบรวมฟังก์ชันคำสั่งต่าง ๆ เอาไว้อย่างเป็นหมวดหมู่ เช่น ฟังก์ชันสำหรับการคำนวณทางคณิตศาสตร์ การจัดการอินพุตและเอาท์พุต การจัดการข้อความ เป็นต้น ซึ่งฟังก์ชันสำเร็จรูปจะช่วยให้นักพัฒนาโปรแกรมเขียนโปรแกรมได้ง่ายขึ้น 
* ฟังก์ชันที่ผู้พัฒนาสร้างขึ้นมาใช้งาน เป็นส่วนของโปรแกรมย่อยที่สร้างขึ้นเพื่อทำงานตามที่ได้วิเคราะห์แบ่งแยกส่วนของโปรแกรมเอาไว้ โดยโปรแกรมย่อยนี้มักจะเป็นชุดคำสั่งที่มีการเรียกใช้งานบ่อยครั้งหรือเป็นชุดคำสั่งพิเศษ 


### รูปแบบฟังก์ชัน
การสร้างฟังก์ชันในภาษาซีสามารถแบ่งการเขียนออกเป็น 2 รูปแบบ ดังนี้
* ฟังก์ชันที่ไม่มีการคืนค่า หมายถึง ฟังก์ชันที่ไม่มีการส่งค่ากลับไปยังฟังก์ชันที่เรียกใช้งานเมื่อทำงานเสร็จ โดยมีรูปแบบการเขียน ดังนี้

```
void ชื่อฟังก์ชัน() {
          คำสั่ง;
          .......;
}                                              
```

ฟังก์ชันที่ไม่มีการคืนค่าจะเริ่มต้นคำสั่งด้วยการประกาศ void แล้วตามด้วยชื่อฟังก์ชันที่ได้สร้างขึ้นมา โดยการตั้งชื่อฟังก์ชันจะใช้หลักเกณฑ์เดียวกันกับการตั้งชื่อตัวแปร ส่วนที่อยู่ในวงเล็บปีกกา { } จะเป็นขอบเขตการทำงานของฟังก์ชัน ซึ่งตัวอย่างวิธีการเขียนฟังก์ชันอย่างง่าย มีดังนี้

```
void showtext() { 
        cout << "Introduction to Programming";
}
```

จากตัวอย่าง เมื่อเรียกใช้งานฟังก์ชัน showtext() จะได้ผลลัพธ์ ดังนี้

<img src=img/u7.png>

[ดาวน์โหลด source code](src/ch01_01.cpp) 

<img src=img/0108.png>

* ฟังก์ชันที่มีการคืนค่า หมายถึง ฟังก์ชันที่มีการส่งค่ากลับไปยังฟังก์ชันที่เรียกใช้งานฟังก์ชันนี้เมื่อทำงานเสร็จ โดยมีรูปแบบการเขียน ดังนี้

```
ชนิดการคืนค่า ชื่อฟังก์ชัน() {
          คำสั่ง;
          ........;
          return ค่าผลลัพธ์ของฟังก์ชัน;
}
```

ฟังก์ชันที่มีการคืนค่าจะเริ่มต้นชุดคำสั่งจาก ชนิดการคืนค่า ซึ่งเป็นชนิดข้อมูลที่ตรงกับค่าผลลัพธ์ของฟังก์ชัน เช่น int (จำนวนเต็ม) float (จำนวนจริง) และ bool (บูลีน) เป็นต้น ส่วน ค่าผลลัพธ์ของฟังก์ชัน เป็นค่าข้อมูล หรือนิพจน์คำสั่งที่ให้ผลลัพธ์เป็นค่าข้อมูลที่ตรงกับชนิดการคืนค่าของฟังก์ชัน การเขียนฟังก์ชันแบบคืนค่ามีข้อควรระวัง คือจะต้องมีการเขียนคำสั่ง return เพื่อคืน ค่าผลลัพธ์ของฟังก์ชัน ปิดท้ายฟังก์ชันเสมอ ดังตัวอย่างข้างล่าง 

```
float cal_vat(float price, float rate) { 
        float vat = price * rate / 100;
        return vate;
}
```

จากตัวอย่างข้างต้น ฟังก์ชัน cal_vat(float price, float rate) เป็นตัวอย่างฟังก์ชันสำหรับการคำนวณค่าภาษีสินค้า โดยฟังก์ชันดังกล่าว จะรับผ่านตัวแปรหรือตัวแปรพารามิเตอร์นำเข้าราคา (price) และ อัตราภาษี (rate) เพื่อนำมาคำนวนภาษีตามสมการ คือ vat = price * rate / 100; และคืนค่าผลลัพธ์ดังกล่าวกลับออกไป เช่น เมื่อผู้ใช้เรียกใช้ฟังก์ชันดังกล่าวด้วยคำสั่ง cal_vat(1000, 7); จะได้ผลลัพธ์ของฟังก์ชัน เท่ากับ 70 เป็นต้น 

แสดงตัวอย่างการเขียนฟังก์ชันใช้งาน ดังนี้

```
#include <iostream> 
using namespace std;
float cal_vat(float price, float rate);
main() {
    cout << cal_vat(1000,7);
}
float cal_vat(float price, float rate) { 
        return price * rate / 100;
}
```

มีผลการทำงานของโปรแกรม ดังนี้

<img src=img/u8.png>

### รูปแบบการเรียกใช้งานฟังก์ชัน
แนวทางในการเรียกใช้งานฟังก์ชัน มี 3 รูปแบบ คือ
* ฟังก์ชันหลักเรียกใช้งานฟังก์ชันย่อย เป็นการดำเนินการของโปรแกรมโดยเริ่มทำงานที่ฟังก์ชันหลัก main() ก่อนเสมอ ดังนั้น เมื่อออกแบบระบบให้มีการทำงานเป็นส่วนฟังก์ชันย่อยต่าง ๆ  ฟังก์ชันหลักเรียกใช้งานฟังก์ชันย่อยเหล่านั้น แสดงดังภาพ 

<img src=img/0302.png>

แสดงวิธีการใช้งานฟังก์ชันย่อยจากฟังก์ชันหลัก ดังนี้

```
#include <iostream>
using namespace std;
void showHello();                   // ประกาศรูปแบบการเรียกใช้
void showWorld();                  // ประกาศรูปแบบการเรียกใช้
main() {

    showHello();
    showWorld();
}
void showHello() {                 // ประกาศฟังก์ชันย่อย
     cout << "Hello";
}
void showWorld() {                // ประกาศฟังก์ชันย่อย
     cout << "World";
}
```

ผลการทำงานของโปรแกรม

<img src=img/u9.png>

* ฟังก์ชันย่อยเรียกใช้งานฟังก์ชันย่อย เป็นการออกแบบระบบให้มีการทำงานเป็นส่วนฟังก์ชันย่อยต่าง ๆ แบบลำดับชั้น โดยสามารถนำรูปแบบฟังก์ชันย่อยเรียกใช้งานฟังก์ชันย่อยได้ ดังภาพ 

<img src=img/0303.png>

แสดงวิธีการใช้งานฟังก์ชันย่อยจากฟังก์ชันหลัก ดังนี้

```
#include <iostream> 
#include <string.h>
using namespace std;
void showHelloWorld();         // ประกาศรูปแบบการเรียกใช้
string getHello();                 // ประกาศรูปแบบการเรียกใช้
string getWorld();                // ประกาศรูปแบบการเรียกใช้
main() {
    showHelloWorld();       // การเรียกใช้ฟังก์ชัน
}

void showHelloWorld() {       // ประกาศฟังก์ชันย่อย
     cout << getHello() << "  " << getWorld();   // การเรียกใช้ฟังก์ชัน
}
string getHello() {               // ประกาศฟังก์ชันย่อย
     return "Hello";
}
string getWorld() {              // ประกาศฟังก์ชันย่อย
     return "World";
}
```

ผลการทำงานของโปรแกรม

<img src=img/u10.png>

* ฟังก์ชันเรียกใช้งานตัวเอง เป็นฟังก์ชันย่อยที่สามารถเรียกใช้งานฟังก์ชันย่อยของตัวเองได้ ซึ่งจะช่วยแก้ไขปัญหาชุดคำสั่งที่มีความซับซ้อน ดังแสดงตามภาพ

<img src=img/0304.png>

ในที่นี้ขอยกตัวอย่างการใช้รีเคอซีพฟังก์ชันในการแก้ไขปัญหาวิธีการคำนวณค่าคูณสะสมของจำนวนเต็ม หรือเรียกว่า “แฟ็กทอเรียล” (Factorial) เช่น ผลคูณสะสมของ 5 (ในทางคณิตศาสตร์ แทนด้วย 5!) จะมีค่าเท่ากับ 5 x 4 x 3 x 2 x 1 เท่ากับ 120 เป็นต้น โดยการเขียนโปรแกรมแก้ปัญหาการหาค่าแฟ็กทอเรียล แสดงดังตัวอย่างโปรแกรม ดังนี้

```
#include <iostream>
using namespace std;
int Factorial(int n);                       // ประกาศรูปแบบการเรียกใช้
main() {
    int n = 5;
    cout << n << "! = " << Factorial(n); // ฟังก์ชันหลักเรียกใช้ฟังก์ชันย่อย
}
int Factorial(int n) {                       // ประกาศฟังก์ชันย่อย
    if(n==1 or n==0) {  
         return 1;
    } else {
         return n*Factorial(n-1);     // ฟังก์ชันเรียกใช้งานตันเอง
    }
}
```

จากโปรแกรมตัวอย่างมีการเรียกใช้งาน Factorial(n) จากฟังก์ชันหลัก main() โดยที่กำหนดให้ n เท่ากับ 5 ทำให้การทำงานของฟังก์ชันย่อยมีการดำเนินการ ดังนี้

* ครั้งที่ 1	หา Factorial(5) ได้สมาการดำเนินการ	คือ 5 * Factorial(4)
* ครั้งที่ 2 หา Factorial(4) ได้สมาการดำเนินการ	คือ 5 * 4 * Factorial(3)
* ครั้งที่ 3	 หา Factorial(3) ได้สมาการดำเนินการ	คือ 5 * 4 * 3 * Factorial(2)
* ครั้งที่ 4	 หา Factorial(2) ได้สมาการดำเนินการ	คือ 5 * 4 * 3 * 2 * Factorial(1)
* ครั้งที่ 5 หา Factorial(1) ได้สมาการดำเนินการ	คือ 5 * 4 * 3 * 2 * 1

ดังนั้น เมื่อโปรแกรมทำงาน ดังนี้


<img src=img/u11.png>

---
#### [<< หน้าก่อนหน้า](0303.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0310.md)
---

