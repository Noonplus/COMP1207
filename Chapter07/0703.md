## ข้อมูลชนิดโครงสร้าง

ข้อมูลที่อยู่ในโครงสร้างแบบอาเรย์จะต้องเป็นข้อมูลชนิดเดียวกัน เช่น ข้อมูลชนิดจำนวนเต็ม ข้อมูลชนิดตัวอักขระ เป็นต้น ซึ่งในความเป็นจริงข้อมูลจะประกอบด้วยหลายส่วนประกอบที่ไม่ใช่ข้อมูลประเภทเดียวกัน แต่ต้องการเก็บข้อมูลเป็นกลุ่มเดียวกัน เช่น ข้อมูลนักศึกษา ประกอบด้วย รหัสนักศึกษา ชื่อนักศึกษา ที่อยู่ และ เบอร์โทรศัพท์ เป็นต้น ซึ่งการเก็บข้อมูลของกลุ่มตัวแปรประเภทนี้ เรียกว่า “ตัวแปรชนิดโครงสร้าง” ที่มีเป็นเก็บกลุ่มข้อมูลที่มีความสัมพันธ์กันและมีความแตกต่างกันในชนิดของข้อมูลด้วย เช่น ข้อมูลชนิดจำนวนเต็ม ข้อมูลชนิดตัวอักขระ ข้อมูลชนิดตรรกะ เป็นต้น ให้อยู่ภายใต้ชื่อตัวแปรเดียวกัน ซึ่งในหัวข้อนี้จะอธิบายรายละเอียดเกี่ยวกับวิธีการประกาศชนิดโครงสร้างไว้ใช้งาน การประกาศตัวแปรแบบโครงสร้าง การกำหนดค่าข้อมูลให้กับตัวแปรตามโครงสร้าง และการอ้างอิงข้อมูลเข้าตามโครงสร้างรวมทั้งการประยุกต์ใช้ 

### การประกาศตัวแปรแบบโครงสร้าง
การประกาศตัวแปรแบบโครงสร้างจำเป็นต้องจัดทำข้อกำหนดของตัวแปรก่อนจะเรียกใช้ตัวแปรโครงสร้างได้ โดยรูปแบบการประกาศ มีดังนี้
#### 1. การประกาศตัวแปรแบบโครงสร้างทั่วไป มีรูปแบบดังนี้

```
struct ชื่อโครงสร้าง {
    ชนิดตัวแปร ชื่อตัวแปรที่ 1;
    ชนิดตัวแปร ชื่อตัวแปรที่ 2;
    ชนิดตัวแปร ชื่อตัวแปรที่ n;
} รายชื่อตัวแปรโครงสร้าง;
```

โดยที่ struct ตามด้วยชื่อโครงสร้าง เป็นการเริ่มต้นประกาศโครงสร้าง ส่วนชนิดตัวแปร และชื่อตัวแปร จะภายในโครงสร้างนั้น ๆ จะระบุภายในเครื่องหมายปีกกา { } ส่วนรายชื่อตัวแปรโครงสร้าง เป็นการระบุตัวแปรโครงสร้าง ดังตัวอย่าง

```
01:struct EMPLOYEE {
02:   char name[50];                  // ชื่อ-นามสกุลพนักงาน
03:   int expYear;                      // จำนวนปีประสบการณ์ทำงาน
04:   float salary;                      // อัตราเงินเดือนปัจจุบัน
05:} emp1, emp2;  // ประกาศตัวแปรตามโครงสร้าง 2 ตัวแปร คือ emp1 และ emp2
```

#### 2.  การประกาศโครงสร้างและประกาศตัวแปรภายหลัง มีรูปแบบดังนี้

```
struct ชื่อโครงสร้าง {
    ชนิดตัวแปร ชื่อตัวแปรที่ 1;
    ชนิดตัวแปร ชื่อตัวแปรที่ 2;
    ชนิดตัวแปร ชื่อตัวแปรที่ n;
}
```

ตัวอย่างของการประกาศโครงสร้างและประกาศตัวแปรภายหลัง ดังนี้

```
01:struct EMPLOYEE {
02:   char name[50];                     // ชื่อ-นามสกุลพนักงาน
03:   int expYear;                         // จำนวนปีประสบการณ์ทำงาน
04:   float salary;                         // อัตราเงินเดือนปัจจุบัน
05:}
```

จากตัวอย่าง สามารถประกาศตัวแปรตามชนิดโครงสร้างดังกล่าว ได้ดังนี้

```
01:struct EMPLOYEE emp1, emp2;    // ประกาศตัวแปร emp1 และ emp2
```

จากส่วนของโปรแกรม ได้ประกาศตัวแปร emp1 และ emp2 มีชนิดเป็นตัวแปรโครงสร้างแบบ EMPLOYEE

* 3. การประกาศชนิดข้อมูลเป็นแบบโครงสร้างและประกาศตัวแปรภายหลัง เป็นการประกาศชนิดข้อมูลใหม่โดยจะระบุคำสั่ง typedef ไว้ด้านหน้าของการประกาศโครงสร้าง ซึ่งคำสั่ง typedef สามารถนำมาใช้ในการประกาศชนิดโครงสร้างได้โดยมีรูปแบบ ดังนี้

```
typedef struct {
    ชนิดตัวแปร ชื่อตัวแปรที่ 1;
    ชนิดตัวแปร ชื่อตัวแปรที่ 2;
    ชนิดตัวแปร ชื่อตัวแปรที่ n;
} ชื่อชนิดโครงสร้าง;
```

ตัวอย่างการประกาศชนิดข้อมูลเป็นแบบโครงสร้างและประกาศตัวแปรภายหลัง มีดังนี้ 

```
typedef struct {
    char name[50];                     // ชื่อ-นามสกุลพนักงาน
    int expYear;                         // จำนวนปีประสบการณ์ทำงาน
    float salary;                         // อัตราเงินเดือนปัจจุบัน
} EMPLOYEE;     // พร้อมระบุชื่อชนิดโครงสร้างเป็น EMPLOYEE
```
หมายเหตุ: การประกาศชนิดโดยใช้คำสั่ง typedef ควรประกาศไว้ที่ส่วนหัวโปรแกรม

จากตัวอย่างข้างต้น การประกาศชนิดข้อมูลเป็นแบบโครงสร้างใหม่ สามารถนำไปประกาศตัวแปรใช้งาน ดังนี้

```
01:EMPLOYEE emp1, emp2;  // ตัวแปร emp1 และ emp2 เป็นชนิดแบบ EMPLOYEE
```

นอกจากนี้ ยังสามารถนำชนิดแบบโครงสร้างใหม่ ไปประกาศให้อยู่ในรูปแบบอาเรย์ ได้ดังนี้

```
02:EMPLOYEE emp[10]; // ตัวแปร emp เป็นชนิด EMPLOYEE เก็บได้ emp[0] ถึง emp [9]
```

### การอ้างอิงผ่านตัวแปรโครงสร้าง
การประกาศตัวแปรแบบโครงสร้างที่กล่าวมาก่อนหน้านี้ ได้ยกตัวอย่างการใช้รูปแบบการจัดเก็บข้อมูลแบบโครงสร้าง โดยให้ชื่อว่า EMPLOYEE มีการออกแบบโครงสร้างในการจัดเก็บข้อมูล ซึ่งประกอบด้วย 3 ตัวแปร ได้แก่ ชื่อ (name) ประสบการณ์ทำงาน (expYear) และเงินเดือน (salary) และในการเข้าถึงตัวแปรตามโครงสร้างดังกล่าวมีวิธีการ ดังนี้

#### 1.  การอ้างอิงผ่านตัวแปรโครงสร้างทั่วไป มีรูปแบบการอ้างอิง คือ

```
ตัวแปรโครงสร้าง.ชื่อตัวแปรภายในโครงสร้าง
```

ตัวอย่างการอ้างอิงผ่านตัวแปรโครงสร้าง เช่น

```
01:strcpy(emp.name, "James Rhodes");       
02:emp.expYear = 10;                                   
03:emp.salary = 35000.00;                            
04:printf ("Name: %s\n", emp.name);                 
05:printf ("Experience: %d\n", emp.expYear);      
06:printf ("Current Sarary: %.2f\n", emp.salary);  
```
หมายเหตุ: emp คือ ตัวแปรโครงสร้าง 

#### 2.  การอ้างอิงผ่านตัวแปรพอยเตอร์ มีรูปแบบการอ้างอิง ดังนี้

```
พอยเตอร์ -> ตัวแปรภายในโครงสร้าง
```

รูปแบบการอ้างอิงข้างต้นเป็นการประกาศตัวแปรพอยเตอร์ โดยจะต้องระบุชนิดตัวแปรโครงสร้างนั้นและทำการกำหนดตำแหน่งการอ้างอิงไปยังตัวแปรโครงสร้างดังกล่าว ซึ่งตัวอย่างการอ้างอิงตัวแปรในโครงสร้างผ่านตัวแปรพอยเตอร์ มีดังนี้

```
01:strcpy(p -> name, "James Rhodes");      
02:p -> expYear = 10;                                    
03:p -> salary = 35000.00;                          
04:printf ("Name: %s\n", p -> name);             
05:printf ("Experience: %d\n", p -> expYear); 
06:printf ("Current Sarary: %.2f\n", p -> salary);  
```
หมายเหตุ: p คือ ตัวแปรพอยเตอร์ ดูรายละเอียดเพิ่มเติมเรื่องพอยเตอร์ได้ในบทถัดไป

จากตัวอย่างการอ้างอิงตัวแปรในโครงสร้างผ่านตัวแปรพอยเตอร์ข้างต้น สามารถเขียนโปรแกรมการใช้งานโครงสร้างข้อมูลได้ ดังนี้

```
01:#include <stdio.h> 
02:#include <string.h> 
03:typedef struct { 
04:   char name[50]; 
05:   int expYear; 
06:   float salary; 
07:} EMPLOYEE;    
08:main() { 
09:   EMPLOYEE emp, *p;       
10:   strcpy(emp.name, "James Rhodes"); 
11:   emp.expYear = 10;         
12:   emp.salary = 35000.00;        
13:   printf ("Name: %s\n", p -> name);    
14:   printf ("Experience: %d\n", p -> expYear);      
15:   printf ("Current Sarary: %.2f\n", p -> salary);   
16:} 
```
[ดาวน์โหลด source code](src/ch07_05.cpp)

จากโปรแกรมตัวอย่าง บรรทัดที่ 02 ไฟล์ string.h คือ ไลบรารีจัดการเกี่ยวกับข้อความ (String) ในที่นี้ถูกเรียกสำหรับใช้งานคำสั่ง strcpy() ในบรรทัดที่ 10 ซึ่งเป็นคำสั่งแทนค่าข้อความให้กับตัวแปรข้อความ emp.name จากโปรแกรมได้ผลลัพธ์ ดังนี้

```
01:Name: James Rhodes
02:Experience: 10
03:Current Salary: 35000.00	
```

---
#### [<< หน้าก่อนหน้า](0702.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0704.md)
---
