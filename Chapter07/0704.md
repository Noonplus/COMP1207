## โครงสร้างชั้นซ้อน

โครงสร้างชั้นซ้อน เป็นลักษณะการออกแบบให้โครงสร้างซ้อนโครงสร้าง ใช้สำหรับจัดกลุ่มข้อมูลกลุ่มเล็กก่อนที่จะรวมให้เป็นกลุ่มข้อมูลใหญ่ อาทิ หากต้องการจัดเก็บ วัน เดือน และ ปีเกิด โดยที่โครงสร้างวันเกิดนี้เป็นสมาชิกของโครงสร้างข้อมูลพนักงาน สามารถประกาศโครงสร้างซ้อนโครงสร้าง ดังนี้

```
01:struct BDATE {                   // ประกาศโครงสร้างวันที่ BDATE
02:   int dd;
03:   int mm;
04:   int yyyy;
05:};
06:struct EMPLOYEE {              // ประกาศโครงสร้างข้อมูลพนักงาน EMPLOYEE
07:   char name[50];
08:   struct BDATE birthdate;
09:};     
```

จากส่วนของโปรแกรม จะเห็นว่ามีการออกแบบให้โครงสร้าง EMPLOYEE มีการซ้อนด้วยโครงสร้าง BDATE เพื่อจัดเก็บวัน เดือน และ ปีเกิด ดังนั้นในการอ้างอิงในรูปแบบโครงสร้างชั้นซ้อน มีวิธีดังนี้

#### 1.  การอ้างอิงผ่านตัวแปรโครงสร้างชั้นซ้อนทั่วไป สามารถใช้รูปแบบการอ้างอิง ดังนี้

```
ชื่อโครงสร้างใหญ่.ชื่อโครงสร้างย่อย.ชื่อตัวแปรภายใน
```

ตัวอย่างการอ้างอิงตัวแปรผ่านโครงสร้างชั้นซ้อน มีดังนี้

```
01:struct EMPLOYEE emp;
02:strcpy(emp.name, "James Rhodes");         
03:emp.BDATE.dd = 10;                            
04:emp.BDATE.mm = 11;                          
05:emp.BDATE.yyyy = 1969;                     
```

#### 2.  การอ้างอิงผ่านตัวแปรโครงสร้างข้อมูลชั้นซ้อนผ่านพอยเตอร์ สามารถใช้รูปแบบอ้างอิงโครงสร้างชั้นซ้อน ได้ดังนี้

```
พอยเตอร์ที่ชี้ไปยังโครงสร้างใหญ่ -> ชื่อโครงสร้างย่อย.ชื่อตัวแปรภายใน
```

ตัวอย่างการอ้างอิงตัวแปรผ่านพอยเตอร์ มีดังนี้

```
01:struct EMPLOYEE emp, *p;
02:p = &emp;
03:strcpy(p -> name, "James Rhodes");         
04:p -> birthdate.dd = 10;            
05:p -> birthdate.mm = 11;            
06:p -> birthdate.yyyy = 1969;     
```

จากตัวอย่าง ```*p``` เป็นตัวแปรแบบพอยเตอร์เป็นตัวชี้ข้อมูลชนิด EMPLOYEE  โดยตัวอย่างการอ้างอิงผ่านตัวแปรโครงสร้างข้อมูลชั้นซ้อนผ่านพอยเตอร์ข้างต้น สามารถเขียนโปรแกรมการใช้งานโครงสร้างข้อมูลชั้นซ้อนได้ ดังนี้

```
01:#include <stdio.h> 
02:#include <string.h> 
03:main() { 
04:   struct BDATE {                  
05:       int dd;
06:       int mm;
07:       int yyyy;
08:   };
09:   struct EMPLOYEE {             
10:       char name[50];
11:       struct BDATE birthdate;
12:   } emp, *p;                                        
13:   strcpy(emp.name, "James Rhodes"); 
14:   emp.birthdate.dd = 10; 
15:   emp.birthdate.mm = 11; 
16:   emp.birthdate.yyyy = 1969; 
17:   p =  &emp;                
18:   printf("Name: %s\n", p -> name); 
19:   printf("Birthdate: %d-%d-%d\n", p -> birthdate.dd, 
20:   p -> birthdate.mm, p -> birthdate.yyyy); 
21:}
```
[ดาวน์โหลด source code](src/ch07_06.cpp)

ผลการทำงานของโปรแกรม ดังนี้

```
01:Name: James Rhodes
02:Birthdate: 10-11-1969	
```

---
#### [<< หน้าก่อนหน้า](0703.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0705.md)
---
